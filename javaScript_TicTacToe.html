<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body{
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }
        .cell {
            font-family: sans-serif;
            font-size: larger;
            font-weight: bolder;
            background-color: beige;
            width: 100px;
            height: 100px;
            border: 1px solid black;
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .cell:hover{
            background-color: blanchedalmond;
        }

        .row {
            display: flex;
        }
    </style>
</head>

<body>
    <h1>
        Score
    </h1>
    <h2 id="score"s>
        X (0-0) O
    </h2>
    <h1 id="turn">
        Now it's is X turn
    </h1>
    <button id="reset-btn">Reset</button>


    <!-- Board -->
    <div class="board">
        <div class="row">
            <div class="cell"></div>
            <div class="cell"></div>
            <div class="cell"></div>
        </div>
        <div class="row">
            <div class="cell"></div>
            <div class="cell"></div>
            <div class="cell"></div>
        </div>
        <div class="row">
            <div class="cell"></div>
            <div class="cell"></div>
            <div class="cell"></div>
        </div>
        <script>
            // controll turns 
            let turn = 0
            let letter = "X"

            // add letters
            document.querySelector(".board").addEventListener("click", play_turn)
            
            function play_turn(e) {

                var x_wins = 0;
                var o_wins = 0;
                //get target
                cell = e.target
                
                //check if letter already exists
                if (cell.innerText == 'X' || cell.innerText == 'O'){
                    return;
                }
                //add the letter
                textElement = document.createTextNode(`${letter}`)
                cell.appendChild(textElement)

                //change cell color
                cell.style.backgroundColor= 'blanchedalmond';

                //change turn
                turn = (turn + 1) % 2;
                console.log(turn)

                //change letter
                if (turn == 0) {
                    letter = "X"
                } else {
                    letter = "O"
                }

                //check for win or draw and declare it if exists

                //create a matrix from an array
                arr = document.getElementsByClassName("cell")
                function arrayToMatrix(arr, elementsInRow){
                    var matrix = [], i, k;
                    for (i = 0, k = -1; i < arr.length; i++) {
                        if (i % 3 === 0) {
                            k++;
                            matrix[k] = [];
                        }

                        matrix[k].push(arr[i]);
                        
                    }
                    return matrix;
                }

                //check for win or draw
                function checkWin(letter) {
                    matrix = arrayToMatrix(arr,3);
                    // Check rows
                    for (let i = 0; i < matrix.length; i++) {
                        if (
                            matrix[i][0].innerText === letter &&
                            matrix[i][1].innerText === letter &&
                            matrix[i][2].innerText === letter
                        ) {
                            return true;
                        }
                    }

                    // Check columns
                    for (let i = 0; i < matrix[0].length; i++) {
                        if (
                            matrix[0][i].innerText === letter &&
                            matrix[1][i].innerText === letter &&
                            matrix[2][i].innerText === letter
                        ) {
                            return true;
                        }
                    }

                    // Check diagonals
                    if (
                        matrix[0][0].innerText === letter &&
                        matrix[1][1].innerText === letter &&
                        matrix[2][2].innerText === letter
                    ) {
                        return true;
                    }

                    if (
                        matrix[0][2].innerText === letter &&
                        matrix[1][1].innerText === letter &&
                        matrix[2][0].innerText === letter
                    ) {
                        return true;
                    }

                    return false;
                }
        
                //change title to reflect who win or draw if its draw
             
                
                
                // document.getElementById("score").innerText = `X (`${x_wins} '-' ${o_wins} 'O'
                
                document.getElementById("turn").innerText = `Now it's ${letter} turn`
                
                function resetGame() {
                    for (let cell of arr) {
                        cell.innerText = '';
                        cell.style.backgroundColor = 'beige';
                    }
                }
                document.getElementById("reset-btn").addEventListener("click", resetGame);


            }
            
        </script>
    </div>
</body>

</html>